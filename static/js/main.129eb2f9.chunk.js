(this.webpackJsonpmepergunte=this.webpackJsonpmepergunte||[]).push([[0],{25:function(e,t,n){},33:function(e,t,n){},41:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(26),s=n.n(c),i=n(5),o=n.n(i),u=n(8),d=n(9),l=n(15),j=(n(33),n(1));function b(e){return Object(j.jsx)("button",Object(l.a)({className:"button"},e))}var p=n(6),h=n(19);n(35),n(37);h.a.initializeApp({apiKey:"AIzaSyAt0XmBfR6ik44aostgEhoC_okBPBWknMY",authDomain:"mepergunte-692d3.firebaseapp.com",databaseURL:"https://mepergunte-692d3-default-rtdb.firebaseio.com",projectId:"mepergunte-692d3",storageBucket:"mepergunte-692d3.appspot.com",messagingSenderId:"351506380962",appId:"1:351506380962:web:31ca9e08e9306172737ffb"});var f=h.a.auth(),m=h.a.database(),x=Object(r.createContext)({});function O(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),a=n[0],c=n[1];function s(){return(s=Object(u.a)(o.a.mark((function e(){var t,n,r,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.GoogleAuthProvider,e.next=3,f.signInWithPopup(t);case 3:if(!(n=e.sent).user){e.next=9;break}if(r=n.user,a=r.displayName,s=r.photoURL,i=r.uid,a&&s){e.next=8;break}throw new Error("Mising information from Google Account");case 8:c({id:i,name:a,avatar:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=f.onAuthStateChanged((function(e){if(e){var t=e.displayName,n=e.photoURL,r=e.uid;if(!t||!n)throw new Error("Mising information from Google Account");c({id:r,name:t,avatar:n})}}));return function(){e()}}),[]),Object(j.jsx)(x.Provider,{value:{user:a,signInWithGoogle:function(){return s.apply(this,arguments)}},children:e.children})}function v(){return Object(r.useContext)(x)}var g=n.p+"static/media/illustration.ae7276f0.svg",k=n.p+"static/media/google-icon.df15d8e5.svg";n(41);function w(){var e=Object(p.f)(),t=v(),n=t.user,a=t.signInWithGoogle,c=Object(r.useState)(""),s=Object(d.a)(c,2),i=s[0],l=s[1];function h(){return(h=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return t.next=3,a();case 3:e.push("/room/new");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==i.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,m.ref("rooms/".concat(i)).get();case 5:if((r=t.sent).exists()){t.next=9;break}return alert("Esta sala n\xe3o existe."),t.abrupt("return");case 9:if(!r.val().endedAt){t.next=12;break}return alert("Esta sala foi encerrada."),t.abrupt("return");case 12:e.push("/rooms/".concat(i));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(j.jsxs)("div",{id:"auth-page",children:[Object(j.jsxs)("aside",{children:[Object(j.jsx)("img",{src:g,alt:"Ilustra\xe7\xe3o de perguntas e respostas"}),Object(j.jsx)("strong",{children:"Fa\xe7a sua pergunta"}),Object(j.jsx)("p",{children:"Tire suas d\xfavidas em tempo real"})]}),Object(j.jsx)("main",{children:Object(j.jsxs)("div",{className:"main-content",children:[Object(j.jsxs)("button",{className:"btn-create-room",onClick:function(){return h.apply(this,arguments)},children:[Object(j.jsx)("img",{src:k,alt:"Google Logo"}),"Entre com o google"]}),Object(j.jsx)("div",{className:"separator",children:"Ou entre em uma sala"}),Object(j.jsxs)("form",{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(j.jsx)("input",{onChange:function(e){var t=e.target;return l(t.value)},value:i,type:"text",placeholder:"Digite o c\xf3digo da sala"}),Object(j.jsx)(b,{type:"submit",children:"Entrar na sala!"})]})]})})]})}var y=n(14);function C(){var e=v().user,t=Object(p.f)(),n=Object(r.useState)(""),a=Object(d.a)(n,2),c=a[0],s=a[1];function i(){return(i=Object(u.a)(o.a.mark((function n(r){var a,s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),""!==c.trim()){n.next=3;break}return n.abrupt("return");case 3:return a=m.ref("rooms"),n.next=6,a.push({title:c,authorId:null===e||void 0===e?void 0:e.id});case 6:s=n.sent,t.push("/admin/rooms/".concat(s.key));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(j.jsxs)("div",{id:"auth-page",children:[Object(j.jsxs)("aside",{children:[Object(j.jsx)("img",{src:g,alt:"Ilustra\xe7\xe3o de perguntas e respostas"}),Object(j.jsx)("strong",{children:"Fa\xe7a sua pergunta"}),Object(j.jsx)("p",{children:"Tire suas d\xfavidas em tempo real"})]}),Object(j.jsx)("main",{children:Object(j.jsxs)("div",{className:"main-content",children:[Object(j.jsx)("h2",{children:"Crie uma nova sala"}),Object(j.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(j.jsx)("input",{onChange:function(e){var t=e.target;return s(t.value)},value:c,type:"text",placeholder:"C\xf3digo da sala"}),Object(j.jsx)(b,{type:"submit",children:"Criar sala"})]}),Object(j.jsxs)("p",{children:["Quer entrar em uma sala existente? ",Object(j.jsx)(y.b,{to:"/mepergunte",children:"Clique aqui"})]})]})})]})}n(49);function N(e){var t=e.author,n=e.isAnswered,r=e.isHighLighted,a=e.children,c=e.content;return Object(j.jsxs)("div",{className:"question-card-container\n      ".concat(r&&!n?"highLighted":"","\n      ").concat(n?"answered":""),children:[Object(j.jsx)("p",{children:c}),Object(j.jsxs)("div",{className:"user-info",children:[Object(j.jsxs)("div",{className:"left-content",children:[Object(j.jsx)("img",{src:t.avatar,alt:t.name}),Object(j.jsx)("span",{children:t.name})]}),Object(j.jsx)("div",{className:"right-content",children:a})]})]})}var L=n.p+"static/media/copy.2f36f99e.svg";n(50);function A(e){return Object(j.jsxs)("button",{onClick:function(){navigator.clipboard.writeText(e.code)},className:"room-code",children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:L,alt:"copy"})}),Object(j.jsx)("span",{children:"Sala ".concat(e.code)})]})}function I(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],u=i[1],l=v().user;return Object(r.useEffect)((function(){var t=m.ref("rooms/".concat(e));return t.on("value",(function(e){var t=e.val(),n=t.questions||{},r=Object.entries(n).map((function(e){var t,n=Object(d.a)(e,2),r=n[0],a=n[1];return{id:r,content:a.content,author:a.author,isHighLighted:a.isHighLighted,isAnswered:a.isAnswered,likeCount:Object.values(a.likes||{}).length,likeId:null===(t=Object.entries(a.likes||{}).find((function(e){var t=Object(d.a)(e,2);t[0];return t[1].authorId===(null===l||void 0===l?void 0:l.id)})))||void 0===t?void 0:t[0]}}));c(r),u(t.title)})),function(){t.off("value")}}),[e,null===l||void 0===l?void 0:l.id]),{questionsList:a,roomTitle:o}}n(25);function S(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],c=v().user,s=Object(p.g)().id,i=I(s),h=i.questionsList,f=i.roomTitle;function x(){return(x=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==n.trim()){e.next=3;break}return e.abrupt("return");case 3:if(c){e.next=5;break}throw new Error("You must be logged in");case 5:return r={content:n,author:{name:c.name,avatar:c.avatar},isHighLighted:!1,isAnswered:!1},e.next=8,m.ref("rooms/".concat(s,"/questions")).push(r);case 8:a("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,m.ref("rooms/".concat(s,"/questions/").concat(t,"/likes/").concat(n)).remove();case 3:e.next=7;break;case 5:return e.next=7,m.ref("rooms/".concat(s,"/questions/").concat(t,"/likes")).push({authorId:null===c||void 0===c?void 0:c.id});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{id:"room-page",children:[Object(j.jsxs)("header",{children:[Object(j.jsx)("p",{children:"LOGO"}),Object(j.jsx)("div",{children:Object(j.jsx)(A,{code:s})})]}),Object(j.jsxs)("main",{className:"content",children:[Object(j.jsxs)("div",{className:"room-title",children:[Object(j.jsx)("h1",{children:f}),h.length>0&&Object(j.jsx)("span",{children:"".concat(h.length," pergunta(s)")})]}),Object(j.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(j.jsx)("textarea",{onChange:function(e){var t=e.target;return a(t.value)},placeholder:"Pergunte",value:n}),Object(j.jsxs)("div",{className:"form-footer",children:[c?Object(j.jsxs)("div",{className:"user-info",children:[Object(j.jsx)("img",{src:c.avatar,alt:c.name}),Object(j.jsx)("span",{children:c.name})]}):Object(j.jsxs)("span",{children:["Para enviar sua pergunta,",Object(j.jsx)("button",{className:"btn-login",children:" fa\xe7a seu login."})]}),Object(j.jsx)(b,{disabled:!c,type:"submit",children:"Enviar sua pergunta"})]})]}),h.map((function(e){return Object(j.jsx)(N,Object(l.a)(Object(l.a)({},e),{},{children:!e.isAnswered&&Object(j.jsxs)("button",{className:"like-button ".concat(e.likeId?"liked":""),type:"button",onClick:function(){return function(e,t){return O.apply(this,arguments)}(e.id,e.likeId)},children:[e.likeCount>0&&Object(j.jsx)("span",{children:e.likeCount}),Object(j.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(j.jsx)("path",{d:"M7 22H4C3.46957 22 2.96086 21.7893 2.58579 21.4142C2.21071 21.0391 2 20.5304 2 20V13C2 12.4696 2.21071 11.9609 2.58579 11.5858C2.96086 11.2107 3.46957 11 4 11H7M14 9V5C14 4.20435 13.6839 3.44129 13.1213 2.87868C12.5587 2.31607 11.7956 2 11 2L7 11V22H18.28C18.7623 22.0055 19.2304 21.8364 19.5979 21.524C19.9654 21.2116 20.2077 20.7769 20.28 20.3L21.66 11.3C21.7035 11.0134 21.6842 10.7207 21.6033 10.4423C21.5225 10.1638 21.3821 9.90629 21.1919 9.68751C21.0016 9.46873 20.7661 9.29393 20.5016 9.17522C20.2371 9.0565 19.9499 8.99672 19.66 9H14Z",stroke:"#737380",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),e.id)}))]})]})}var q=n.p+"static/media/delete.22ba6e00.svg",E=n.p+"static/media/check.5dfa6ed6.svg",D=n.p+"static/media/answer.4502a8d5.svg";function H(){var e=Object(p.f)(),t=Object(p.g)().id,n=I(t),r=n.questionsList,a=n.roomTitle;function c(){return(c=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Deseja excluir a pergunta?")){e.next=3;break}return e.next=3,m.ref("rooms/".concat(t,"/questions/").concat(n)).remove();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(u.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Deseja excluir a sala?")){n.next=4;break}return n.next=3,m.ref("rooms/".concat(t)).update({endedAt:new Date});case 3:e.push("/mepergunte");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ref("rooms/".concat(t,"/questions/").concat(n,"/isHighLighted")).transaction((function(e){return!e}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ref("rooms/".concat(t,"/questions/").concat(n)).update({isAnswered:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{id:"room-page",children:[Object(j.jsxs)("header",{children:[Object(j.jsx)("p",{children:"LOGO"}),Object(j.jsxs)("div",{children:[Object(j.jsx)(A,{code:t}),Object(j.jsx)(b,{onClick:function(){return s.apply(this,arguments)},children:"Encerrar Sala"})]})]}),Object(j.jsxs)("main",{className:"content",children:[Object(j.jsxs)("div",{className:"room-title",children:[Object(j.jsx)("h1",{children:a}),r.length>0&&Object(j.jsx)("span",{children:"".concat(r.length," pergunta(s)")})]}),r.map((function(e){return Object(j.jsxs)(N,Object(l.a)(Object(l.a)({},e),{},{children:[!e.isAnswered&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"check-button",type:"button",onClick:function(){return function(e){return d.apply(this,arguments)}(e.id)},children:Object(j.jsx)("img",{src:E,alt:"Check icon"})}),Object(j.jsx)("button",{className:"answer-button",type:"button",onClick:function(){return function(e){return i.apply(this,arguments)}(e.id)},children:Object(j.jsx)("img",{src:D,alt:"Answer icon"})})]}),Object(j.jsx)("button",{className:"delete-button",type:"button",onClick:function(){return function(e){return c.apply(this,arguments)}(e.id)},children:Object(j.jsx)("img",{src:q,alt:"Delete icon"})})]}),e.id)}))]})]})}var G=function(){return Object(j.jsx)(y.a,{children:Object(j.jsx)(p.c,{children:Object(j.jsxs)(O,{children:[Object(j.jsx)(p.a,{exact:!0,path:"/mepergunte",component:w}),Object(j.jsx)(p.a,{exact:!0,path:"/room/new",component:C}),Object(j.jsx)(p.a,{exact:!0,path:"/rooms/:id",component:S}),Object(j.jsx)(p.a,{exact:!0,path:"/admin/rooms/:id",component:H})]})})})};n(51);s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(G,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.129eb2f9.chunk.js.map